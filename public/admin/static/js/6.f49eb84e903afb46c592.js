webpackJsonp([6],{226:function(t,e,n){n(547);var o=n(23)(n(286),n(762),"data-v-a0cb86cc",null);t.exports=o.exports},286:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(54),i=n.n(o),a=function(t){return n.e(18).then(function(){var e=[n(247)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={name:"RoutingDetails",data:function(){return{isLoading:!1,isAdd:!0,form:{id:null,uri:"/",method:"get",description:"新添加的路由",controller_code:"async function route (ctx, next) {\n\n\t/**\n\t * 路由控制器\n\t * @param  {Object}        ctx                       上下文(参考koa官网)\n\t * @param  {Object}        ctx.params                路由uri的查询对象\n\t * @param  {Object}        ctx.query                 查询对象\n\t * @param  {Object}        ctx.request.body          POST传参body对象\n\t * @param  {AsyncFunction} ctx.request.getFormidable 解析 `multipart/form-data` 协议\n\t * @param  {Function}      ctx.getTool               获取工具方法\n\t * @param  {Function}      ctx.render                渲染模板问文件\n\t * @param  {Function}      next                      交给下一个路由\n\t */\n\n\t/**\n\t * 解析 `multipart/form-data` 协议\n     *\n     * 只解析字段\n     * if (ctx.is('multipart/form-data')) {\n     *     const { fields } = await ctx.request.getFormidable();\n     * }\n     *\n     * 解析字段并接收上传的文件\n     * if (ctx.is('multipart/form-data')) {\n     *     const { fields, files } = await ctx.request.getFormidable(true);\n     * }\n\t */\n  \n\t/**\n\t * 获取工具方法\n\t * const tool = ctx.getTool('testTool');\n\t * await tool();\n\t */\n\n\t/**\n\t * 渲染模板文件\n\t * ctx.state = { title: 'web title' };\n\t * await ctx.render('index');\n\t * await ctx.render('index.ejs');\n\t * await ctx.render('index.pug');\n\t */\n\n}",updated_at:null,created_at:null}}},props:{data:{type:Object,required:!0},config:{type:Object,required:!0}},methods:{openRegExp:function(){this.$alert("尚未开发","查看路由的RegExp（正则表达式）")},checkCode:function(){return this.getData("core/checkCode",{code:this.form.controller_code})},onAdd:function(){var t=this;this.isLoading=!0,this.checkCode().then(function(e){return t.getData("core/route/add",t.form)}).then(function(e){t.isLoading=!1,t.$message.success("添加成功"),t.$emit("emit","RoutingList",{event:"refresh"}),t.onClose()}).catch(function(e){t.isLoading=!1,t.$message.warning(e.msg)})},onUpdate:function(){var t=this;this.isLoading=!0,this.checkCode().then(function(e){return t.getData("core/route/update",t.form)}).then(function(e){t.isLoading=!1,t.$message.success("更新成功"),t.$emit("emit","RoutingList",{event:"refresh"}),t.onClose()}).catch(function(e){t.isLoading=!1,t.$message.warning(e.msg)})},onClose:function(){this.isAdd?this.$emit("close","RoutingAdd"):this.$emit("close","RoutingDetails",this.form.id)}},components:{codemirror:a},created:function(){var t=this;null!==this.data.id&&(this.isLoading=!0,this.isAdd=!1,this.getData("core/route/get",{id:this.data.id}).then(function(e){t.isLoading=!1,i()(t.form,e)},function(e){t.$message.warning(e.msg)}))}}},478:function(t,e,n){e=t.exports=n(215)(!0),e.push([t.i,".routing-details[data-v-a0cb86cc]{margin:15px}","",{version:3,sources:["D:/project/GitHub/myapp-admin/src/window/RoutingDetails.vue"],names:[],mappings:"AACA,kCACC,WAAa,CACb",file:"RoutingDetails.vue",sourcesContent:["\n.routing-details[data-v-a0cb86cc] {\n\tmargin: 15px;\n}\n"],sourceRoot:""}])},547:function(t,e,n){var o=n(478);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n(216)("d9e847c4",o,!0)},762:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],ref:"form",staticClass:"routing-details",attrs:{model:t.form,"element-loading-text":"拼命加载中","label-width":"85px"}},[n("el-form-item",{attrs:{label:"方法"}},[n("el-select",{attrs:{placeholder:"请选择方法"},model:{value:t.form.method,callback:function(e){t.form.method=e},expression:"form.method"}},[n("el-option",{attrs:{label:"GET",value:"get"}}),t._v(" "),n("el-option",{attrs:{label:"POST",value:"post"}})],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"URL"}},[n("el-input",{attrs:{placeholder:"请输入URI"},model:{value:t.form.uri,callback:function(e){t.form.uri=e},expression:"form.uri"}},[n("template",{slot:"append"},[n("el-button",{on:{click:t.openRegExp}},[t._v("查看RegExp")])],1)],2)],1),t._v(" "),n("el-form-item",{attrs:{label:"描述"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:2},placeholder:"请输入描述"},model:{value:t.form.description,callback:function(e){t.form.description=e},expression:"form.description"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"控制器代码"}},[n("div",{staticClass:"codemirror"},[n("codemirror",{ref:"myEditor",model:{value:t.form.controller_code,callback:function(e){t.form.controller_code=e},expression:"form.controller_code"}})],1)]),t._v(" "),n("el-form-item",[t.isAdd?n("el-button",{attrs:{type:"primary"},on:{click:t.onAdd}},[t._v("立即添加")]):n("el-button",{attrs:{type:"primary"},on:{click:t.onUpdate}},[t._v("修改")]),t._v(" "),n("el-button",{on:{click:t.onClose}},[t._v("取消")])],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=6.f49eb84e903afb46c592.js.map